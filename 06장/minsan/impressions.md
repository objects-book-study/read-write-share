# 인터페이스는 객체가 어떻게 하는지가 아니라, `무엇`을 하는지 서술해야 한다

훌륭한 인터페이스를 수확하기 위해서는 _객체가 어떻게 작업을 수행하는지_ 노출해서는 안 된다.

**어떻게 하는지**는 내부 구현 정보이기 때문에, 실제 내부 구현이 수정된다면 인터페이스에도 영향을 줄 것이고 결국 객체 외부로 영향이 퍼지기 때문이다.

> `무엇을 하는지`에 집중하는 것은 **외부의 객체가 메시지를 전송하는 `목적`** 을 먼저 생각하게 만든다.
>
> 👉🏻 클라이언트의 관점에서 **동일한 작업을 수행하는 메서드들**을 `하나의 타입 계층`으로 묶을 수 있는 가능성이 커진다.  
> 👉🏻 그리고 이는 인터페이스에 `클라이언트의 의도`를 드러내는 것으로도 이어진다.

# 인터페이스는 클라이언트의 의도를 드러내야 한다

객체에게 묻지 말고 시키되, 구현 방법이 아닌 클라이언트의 의도를 드러내야 한다.

**인터페이스에 의도를 드러내기 위해**, 책에서는 아래의 방법을 제안하기도 한다.

```
1. 매우 다른 두 번째 구현을 상상하라.
2. 그러고는 해당 메서드에 동일한 이름을 붙인다고 상상해보라.

그렇게 하면 아마도 그 순간에 가능한 가장 추상적인 이름을 메서드에 붙일 수 있다.
```

# 결합도가 낮으면서도 의도를 명확히 드러내는 간결한 협력 얻기

- 디미터 법칙
- 묻지 말고 시켜라 스타일
- 클라이언트의 의도를 드러내는 인터페이스

# 디미터 법칙은 하나의 도트(.)를 강제하는 규칙이 아니다

둘 이상의 도트를 사용하는 모든 케이스가 디미터 법칙을 위반한 것은 아니다.

> 👉🏻 기차 충돌처럼 보이더라도, `객체의 내부 구현`에 대한 어떤 정보도 **외부로 노출하지 않는다**면, 그것은 디미터 법칙을 준수한 것

# 원칙을 아는 것보다 더 중요한 것은 언제 원칙이 유용하고 언제 유용하지 않은지 판단하는 능력이다

초보자는 원칙을 맹목적으로 추종한다. 심지어 적용하려는 원칙들이 서로 충돌하는 경우에도 원칙에 정당성을 부여하고 억지로 끼워 맞추려 노력한다.

결과적으로 설계는 일관성을 잃고 코드는 무질서 속에 파묻힌다.

> 원칙이 현재 상황에 부적합하다고 판단되면 과감하게 원칙을 무시하라

### ⭐️ `묻지 말고 시켜라`와 `디미터 법칙` 준수는 때론 응집도를 낮출 수 있다

`책 200쪽`에서 소개한 `DiscountCondition` 같은 케이스처럼, 오히려 기차 충돌 문제를 완화하면 응집도가 낮아지는 경우가 발생할 수 있다.

객체지향에서 가장 중요한 것은 **모든 객체가 적절한 책임을 맡으며 협력을 이루는 것**이다.  
디미터 법칙 위반을 해결하는 과정에서, 자칫 **어울리지 않는 역할을 위임**할 수 있기 때문에 _(= 응집도 낮아짐)_ 법칙을 맹목적으로 사용하기 보다는 항상 `트레이드 오프`를 해야한다.

> 👉🏻 결국 맹목적으로 **기차 충돌**같은 패턴에만 집착하면 안되며, 좋은 객체지향 설계를 위한 `트레이드오프`가 필요하다는 의미로 해석된다.

# 물으려는 객체가 정말로 데이터인 경우도 있다

로버트 마틴은 **디미터 법칙의 위반 여부**는 **묻는 대상**이 `객체`인지, `자료구조`인지에 달려있다고 말한다.

- **객체**
  - 내부 구조를 숨겨야 하므로 디미터 법칙을 따르는 것이 좋다.
- **자료구조**
  - 내부를 노출해야 하므로 디미터 법칙을 적용할 필요가 없다.

그리고 **필요에 따라서는 물어봐야 하는 경우가 존재한다**는 사실은 `명령-쿼리 분리 원칙`으로 이어진다.

> 즉, 객체에게 시키는 것이 항상 가능한 것이 아니며, 때로는 물어봐야 할 때가 있다는 것이다.  
> 불가능한 경우에도 억지로 끼워맞춰서 법칙을 준수하려고 애쓸 필요 없다.
